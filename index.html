<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meme Overload</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }

        .meme {
            position: absolute;
            z-index: 5;
            will-change: transform;
        }

        .emoji-text {
            position: absolute;
            font-size: 5rem;
            font-family: "Comic Sans MS", "Comic Sans", cursive;
            font-weight: bold;
            color: white;
            text-shadow: 3px 3px 0 #ff00de, -3px -3px 0 #00d9ff;
            pointer-events: none;
            z-index: 100;
            animation: fade-out 1s forwards;
            user-select: none;
        }

        @keyframes fade-out {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(1.5); }
        }

        .shake {
            animation: screen-shake 0.15s linear;
        }

        @keyframes screen-shake {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-10px, 10px); }
            50% { transform: translate(10px, -10px); }
            75% { transform: translate(-10px, 10px); }
        }
    </style>
</head>
<body>
    <audio id="memeAudio" src="clown.mp3" loop></audio>

    <script>
        const IMAGE_SRC = 'mushroom_meme.png';
        const NUM_IMAGES_START = 15;
        const MIN_SIZE = 50;
        const MAX_SIZE = 200;
        const EMOJIS = ["😝😝😝😝😝😝😝😝😝😝😝"];

        const body = document.body;
        const memes = [];
        let chaosStarted = false;

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }
        
        function createMeme(startX, startY) {
            const size = random(MIN_SIZE, MAX_SIZE);
            
            const memeElement = document.createElement('img');
            memeElement.src = IMAGE_SRC;
            memeElement.alt = "Spinning Meme";
            memeElement.className = 'meme';
            memeElement.style.width = `${size}px`;
            memeElement.style.height = `${size}px`;
            
            body.appendChild(memeElement);

            const meme = {
                element: memeElement,
                x: startX || random(0, window.innerWidth - size),
                y: startY || random(0, window.innerHeight - size),
                dx: random(-4, 4) || 1,
                dy: random(-4, 4) || 1,
                rotation: 0,
                rotationSpeed: random(-8, 8),
                size: size
            };

            memes.push(meme);
        }

        function createMemeBurst(x, y) {
            const burstAmount = 5;
            for (let i = 0; i < burstAmount; i++) {
                createMeme(x, y);
            }
        }

        function createEmojiText(x, y) {
            const textElement = document.createElement('div');
            textElement.className = 'emoji-text';
            textElement.textContent = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
            textElement.style.left = `${x}px`;
            textElement.style.top = `${y}px`;
            textElement.style.transform = `translate(-50%, -50%) rotate(${random(-25, 25)}deg)`;
            
            body.appendChild(textElement);
            
            setTimeout(() => {
                if(textElement.parentElement) {
                    body.removeChild(textElement);
                }
            }, 1000);
        }

        function shakeScreen() {
            body.classList.add('shake');
            setTimeout(() => body.classList.remove('shake'), 150);
        }

        function induceMoreChaos(event) {
            const x = event.touches ? event.touches[0].clientX : event.clientX;
            const y = event.touches ? event.touches[0].clientY : event.clientY;
            
            createMemeBurst(x, y);
            createEmojiText(x, y);
            shakeScreen();
        }

        function animate() {
            memes.forEach(meme => {
                meme.x += meme.dx;
                meme.y += meme.dy;
                meme.rotation += meme.rotationSpeed;

                if (meme.x <= 0 || meme.x + meme.size >= window.innerWidth) {
                    meme.dx *= -1;
                }
                if (meme.y <= 0 || meme.y + meme.size >= window.innerHeight) {
                    meme.dy *= -1;
                }
                
                meme.element.style.transform = `translate(${meme.x}px, ${meme.y}px) rotate(${meme.rotation}deg)`;
            });

            const r = Math.floor(random(0, 256));
            const g = Math.floor(random(0, 256));
            const b = Math.floor(random(0, 256));
            body.style.backgroundColor = `rgb(${r},${g},${b})`;

            requestAnimationFrame(animate);
        }

        async function startChaos() {
            if (chaosStarted) return;
            chaosStarted = true;
            
            const audio = document.getElementById('memeAudio');
            if (audio.paused) {
                audio.play().catch(error => {
                    console.error("Audio playback failed:", error);
                });
            }

            for (let i = 0; i < NUM_IMAGES_START; i++) {
                createMeme();
            }

            animate();
            
            body.removeEventListener('click', startChaos);
            body.addEventListener('click', induceMoreChaos);
        }

        body.addEventListener('click', startChaos, { once: true });

        window.addEventListener('resize', () => {
            memes.forEach(meme => {
                if (meme.x + meme.size > window.innerWidth) {
                    meme.x = window.innerWidth - meme.size;
                }
                 if (meme.y + meme.size > window.innerHeight) {
                    meme.y = window.innerHeight - meme.size;
                }
            });
        });

    </script>

</body>
</html>
